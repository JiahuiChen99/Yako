openapi: 3.0.0
info:
  title: YakoAPI
  description: An API to interact with YakoMaster and the Yako platform
  version: 1.0.0
  contact:
    name: Jiahui Chen
    email: Jiahui1@hotmail.es
    url: https://github.com/JiahuiChen99/Yako
externalDocs:
  description: Find out how to run the Yako plaftorm
  url: 'https://github.com/JiahuiChen99/Yako#yako'
tags:
  - name: YakoMaster
    description: All resources to interact with YakoMaster
  - name: cpu_model
    x-displayName: The CPU Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/CPU" />
  - name: gpu_model
    x-displayName: The GPU Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/GPU" />
  - name: sysinfo_model
    x-displayName: The System Information Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/SysInfo" />
  - name: memory_model
    x-displayName: The Memory Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Memory" />
  - name: response_model
    x-displayName: The Response Model
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Response" />
x-tagGroups:
  - name: General
    tags:
      - YakoMaster
  - name: Models
    tags:
      - cpu_model
      - gpu_model
      - sysinfo_model
      - memory_model
      - response_model
paths:
  /alive:
    get:
      tags:
        - YakoMaster
      operationId: alive
      description: Checks YakoMaster availability
      responses:
        '200':
          description: YakoMaster is alive
        default:
          description: YakoMaster is down
  /deploy:
    post:
      tags:
        - YakoMaster
      operationId: deploy
      description: Uploads the application, finds the most suitable node according to the specsheet and deploys in
      responses:
        '200':
          description: Returns top 3 best nodes with its brownie points.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/YakoAgent'
        '400':
          description: Bad request, some requests params mighht be missing
  /cluster:
    get:
      operationId: cluster
      description: Get cluster information
      responses:
        '200':
          description: Returns the cluster's current state
          content:
            application/json:
              schema:
                  $ref: '#/components/Response'